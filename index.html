<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Devenez Ambassadeur GitForge | Lancement J-30</title>
    
    <link rel="icon" type="image/png" href="https://i.imgur.com/7Gn3toV.png">

    <style>
        /* Variables et Réinitialisation de base */
        :root {
            --color-primary: #1e3a8a; /* Bleu Profond - Suggestion pour GitForge */
            --color-secondary: #3b82f6; /* Bleu Vif */
            --color-text: #1f2937;
            --color-background: #f9fafb;
            --color-border: #d1d5db;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--color-background);
            color: var(--color-text);
            line-height: 1.6;
        }

        .container {
            max-width: 900px;
            margin: 40px auto;
            padding: 20px;
        }

        /* En-tête */
        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .logo {
            max-width: 80px;
            height: auto;
            margin-bottom: 10px;
        }

        h1 {
            color: var(--color-primary);
            font-size: 2em;
        }

        p.description {
            color: #4b5563;
            margin-top: 10px;
            font-size: 1.1em;
        }

        /* Formulaire */
        #ambassadorForm {
            background-color: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--color-text);
        }

        input[type="text"],
        input[type="email"],
        textarea,
        select {
            width: 100%;
            padding: 10px;
            border: 1px solid var(--color-border);
            border-radius: 4px;
            font-size: 1em;
            transition: border-color 0.3s;
        }

        input:focus,
        textarea:focus,
        select:focus {
            border-color: var(--color-secondary);
            outline: none;
        }

        textarea {
            resize: vertical;
            min-height: 120px;
        }

        .checkbox-group {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
        }

        .checkbox-item {
            display: flex;
            align-items: center;
        }

        .checkbox-item input[type="checkbox"] {
            width: auto;
            margin-right: 8px;
        }

        /* Bouton */
        button[type="submit"] {
            background-color: var(--color-primary);
            color: white;
            padding: 12px 25px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1.1em;
            font-weight: 600;
            transition: background-color 0.3s;
            width: 100%;
            margin-top: 20px;
        }

        button[type="submit"]:hover {
            background-color: #1e40af;
        }

        /* Messages de statut */
        #message {
            margin-top: 20px;
            padding: 10px;
            border-radius: 4px;
            text-align: center;
        }

        .loading { background-color: #fef3c7; color: #b45309; }
        .success { background-color: #d1fae5; color: #065f46; }
        .error { background-color: #fee2e2; color: #991b1b; }

        /* Responsive Design */
        @media (max-width: 960px) {
            .container {
                margin: 20px 15px;
            }
        }

        @media (max-width: 600px) {
            h1 {
                font-size: 1.5em;
            }
            p.description {
                font-size: 1em;
            }
            .checkbox-group {
                flex-direction: column;
            }
            #ambassadorForm {
                padding: 15px;
            }
        }
    </style>
</head>

<body>

    <div class="container">
        <div class="header">
            <img src="https://i.imgur.com/7Gn3toV.png" alt="GitForge Logo" class="logo">
            <h1>Devenez Ambassadeur GitForge</h1>
            <p class="description">
                **Merci de l'intérêt que vous portez à GitForge !** Nous sommes à moins de 30 jours du lancement officiel. Veuillez remplir les informations ci-dessous pour postuler à notre programme d'ambassadeurs.
            </p>
        </div>

        <form id="ambassadorForm">
            <div class="form-group">
                <label for="fullName">Full Name (Nom complet) *</label>
                <input type="text" id="fullName" name="fullName" required>
            </div>

            <div class="form-group">
                <label for="emailAddress">Email Address (Adresse e-mail) *</label>
                <input type="email" id="emailAddress" name="emailAddress" required>
            </div>

            <div class="form-group">
                <label for="githubUsername">GitHub/GitLab Username (Nom d'utilisateur)</label>
                <input type="text" id="githubUsername" name="githubUsername">
            </div>

            <div class="form-group">
                <label for="socialMediaHandles">Social Media Handles (Profils Sociaux principaux)</label>
                <input type="text" id="socialMediaHandles" name="socialMediaHandles" placeholder="Ex: @votre_profil_x, linkedin.com/in/...">
            </div>

            <div class="form-group">
                <label for="occupationStatus">Current Occupation/Status (Statut actuel) *</label>
                <select id="occupationStatus" name="occupationStatus" required>
                    <option value="">Sélectionner votre statut...</option>
                    <option value="Developer">Developer</option>
                    <option value="Student">Student</option>
                    <option value="Open Source Contributor">Open Source Contributor</option>
                    <option value="Tech Educator">Tech Educator (Formateur/Enseignant)</option>
                    <option value="Marketing/Community">Marketing/Community Manager</option>
                    <option value="Other">Other</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="whyGitForge">Why GitForge? (Pourquoi souhaitez-vous devenir ambassadeur ?) *</label>
                <textarea id="whyGitForge" name="whyGitForge" required placeholder="Décrivez votre motivation et comment vous pouvez aider GitForge..."></textarea>
            </div>

            <div class="form-group">
                <label>Ambassador Activities (Activités préférées en tant qu'ambassadeur) *</label>
                <div class="checkbox-group">
                    <div class="checkbox-item">
                        <input type="checkbox" id="betaTesting" name="activities" value="Beta Testing">
                        <label for="betaTesting">Beta Testing</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="contentCreation" name="activities" value="Content Creation">
                        <label for="contentCreation">Content Creation (Blogs, Vidéos)</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="communityManagement" name="activities" value="Community Management">
                        <label for="communityManagement">Community Management</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="eventHosting" name="activities" value="Event Hosting">
                        <label for="eventHosting">Event Hosting (Meetups, Webinaires)</label>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label>Preferred Programming Languages (Langages préférés)</label>
                <div class="checkbox-group">
                    <div class="checkbox-item"><input type="checkbox" id="langPython" name="languages" value="Python"><label for="langPython">Python</label></div>
                    <div class="checkbox-item"><input type="checkbox" id="langJS" name="languages" value="JavaScript/TypeScript"><label for="langJS">JavaScript/TypeScript</label></div>
                    <div class="checkbox-item"><input type="checkbox" id="langGo" name="languages" value="Go"><label for="langGo">Go</label></div>
                    <div class="checkbox-item"><input type="checkbox" id="langRust" name="languages" value="Rust"><label for="langRust">Rust</label></div>
                    <div class="checkbox-item"><input type="checkbox" id="langPHP" name="languages" value="PHP"><label for="langPHP">PHP</label></div>
                    <div class="checkbox-item"><input type="checkbox" id="langOther" name="languages" value="Other"><label for="langOther">Autre</label></div>
                </div>
            </div>

            <div class="form-group">
                <label for="referralSource">Referral Source (Comment avez-vous entendu parler de nous ?)</label>
                <select id="referralSource" name="referralSource">
                    <option value="">Sélectionner une option...</option>
                    <option value="Social Media">Réseaux Sociaux</option>
                    <option value="Friend/Colleague">Ami/Collègue</option>
                    <option value="Online Article">Article en ligne</option>
                    <option value="Directly from GitForge">Directement de GitForge</option>
                </select>
            </div>

            <div class="form-group">
                <div class="checkbox-item">
                    <input type="checkbox" id="agreement" name="agreement" required>
                    <label for="agreement">Agreement: J'accepte de respecter les conditions du programme d'ambassadeurs (lien à ajouter).*</label>
                </div>
            </div>

            <button type="submit">Soumettre ma candidature</button>
            <div id="message"></div>

        </form>

    </div>

<script>
    // ***************************************************************
    // ATTENTION SÉCURITÉ : Ce jeton sera visible par tout utilisateur 
    // inspectant le code source de la page déployée.
    // N'utilisez cette méthode que pour des jetons à faible privilège 
    // sur des pages à diffusion limitée, comme demandé.
    // ***************************************************************

    const REPO_ID = 'ernestmindres/mindus_for_ernstmind';
    const HF_TOKEN = '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'; 
    // L'ancienne API_URL est ignorée. Nous utilisons l'API REPO pour la création de fichiers.

    const form = document.getElementById('ambassadorForm');
    const messageElement = document.getElementById('message');

    form.addEventListener('submit', async function(e) {
        e.preventDefault();

        messageElement.className = 'loading';
        messageElement.textContent = '⏳ Envoi de votre candidature en cours...';

        // Fonction pour collecter les valeurs de tous les checkboxes d'un groupe
        const getCheckboxValues = (name) => {
            const checkboxes = document.querySelectorAll(`input[name="${name}"]:checked`);
            return Array.from(checkboxes).map(cb => cb.value);
        };

        // 1. Collecter toutes les données du formulaire
        const formData = {
            // Champs de réponse courte / email
            fullName: form.fullName.value.trim(),
            emailAddress: form.emailAddress.value.trim(),
            githubUsername: form.githubUsername.value.trim() || null,
            socialMediaHandles: form.socialMediaHandles.value.trim() || null,
            
            // Champs Select / Textarea
            occupationStatus: form.occupationStatus.value,
            whyGitForge: form.whyGitForge.value.trim(),
            referralSource: form.referralSource.value || null,

            // Champs Checkbox
            ambassadorActivities: getCheckboxValues('activities'),
            programmingLanguages: getCheckboxValues('languages'),
            
            // Accord et horodatage
            agreement: form.agreement.checked,
            timestamp: new Date().toISOString()
        };
        
        // 2. Préparer l'objet à envoyer à Hugging Face (Format API REPO)
        // Utilisation de .jsonl pour correspondre au format JSON Lines pour les datasets
        const submissionData = JSON.stringify(formData, null, 2); 
        const filePath = `submissions/submission_${Date.now()}.jsonl`; // Chemin et nom du fichier
        
        // Préparation du corps de la requête: Le contenu JSON doit être encodé en Base64.
        const payload = {
            // Fonction standard pour l'encodage en Base64 des caractères UTF-8
            encoded_content: btoa(unescape(encodeURIComponent(submissionData))), 
            path: filePath, 
            message: `Ambassador application from ${formData.fullName}`,
        };

        // 3. NOUVELLE URL D'API pour la création de fichiers dans le dépôt
        const REPO_UPLOAD_API_URL = `https://huggingface.co/api/repos/create-file/${REPO_ID}/main`; 

        // 4. Envoyer la requête
        try {
            const response = await fetch(REPO_UPLOAD_API_URL, {
                method: 'POST',
                headers: {
                    'Authorization': `Bearer ${HF_TOKEN}`,
                    'Content-Type': 'application/json', // L'API Repos attend du JSON
                },
                body: JSON.stringify(payload),
            });

            if (!response.ok) {
                const errorDetails = await response.text();
                // Afficher le statut et les 100 premiers caractères de la réponse d'erreur
                throw new Error(`Erreur réseau (${response.status}): ${errorDetails.substring(0, 100)}...`);
            }

            messageElement.className = 'success';
            messageElement.textContent = '✅ Candidature soumise avec succès ! Merci de votre intérêt pour GitForge.';
            form.reset(); // Vider le formulaire
            
        } catch (error) {
            console.error('Erreur lors de la soumission à Hugging Face:', error);
            messageElement.className = 'error';
            messageElement.textContent = `❌ Échec de la soumission. Veuillez réessayer ou vérifier la console. Message: ${error.message}`;
        }
    });
</script>
</body>
</html>
